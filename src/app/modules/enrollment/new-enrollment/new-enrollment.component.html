<section class="innerbanner3">
  <h1 class="w420">Enrollment For - Car Owner</h1>
</section>

<section class="p-60 inn_bg">
  <div class="container">
    <form #form="ngForm" (submit)="form.valid && onNewRegistration(form)">
      <div class="cc_box">
        <div class="row justify-content-between align-items-center">
          <div class="col-lg-6 mr-auto">
            <h3 class="innerheading2">
              General Info
            </h3>
          </div>
          <div class="col-lg-6">
            <div class="profile_info pull-right">
              <img *ngIf="avatar" [src]="avatar" class="img-responsive" />
              <img *ngIf="!avatar" src="assets/images/taxi.png" class="img-responsive" />
              <i class="fas fa-camera fa_edit"></i>
              <input type="file" class="upload" (change)="handleAvatarUpload($event)" accept="image/*" />
              <textarea style="display: none;"
              name="avatar"
              ngModel [(ngModel)]="avatar"></textarea>
              
            </div>
            <p class="error text-right mt-4" *ngIf="form.submitted && avatar == ''">Please upload your photo</p>
          </div>
        </div>
        <div class="row mt-5 form-group">
          <div class="col-12 col-lg-6">
            <label>First Name</label>
            <input
              type="text"
              class="form-control"
              name="fname"
              #fname="ngModel"
              ngModel
              required
            />
            <span class="error" *ngIf="form.submitted && fname.errors?.required"
              >First name is required.</span
            >
          </div>
          <div class="col-12 col-lg-6">
            <label>Last Name</label>
            <input
              type="text"
              class="form-control"
              name="lname"
              #lname="ngModel"
              ngModel
              required
            />
            <span class="error" *ngIf="form.submitted && lname.errors?.required"
              >Last name is required.</span
            >
          </div>
        </div>
        <div class="row form-group">
          <div class="col-12 col-lg-6">
            <label>Correspondence Address</label>
            <input
              type="text"
              class="form-control"
              name="caddress"
              #caddress="ngModel"
              ngModel
              required
            />
            <span
              class="error"
              *ngIf="form.submitted && caddress.errors?.required"
              >Please enter your correspondence address.</span
            >
          </div>

          <div class="col-12 col-lg-6">
            <label>Permanent Address</label>
            <input
              type="text"
              class="form-control"
              name="paddress"
              #paddress="ngModel"
              ngModel
              required
            />
            <span
              class="error"
              *ngIf="form.submitted && paddress.errors?.required"
              >Please enter your permanent address.</span
            >
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-lg-6">
            <label>Phone</label>
            <input
              type="text"
              class="form-control"
              name="phone"
              #phone="ngModel"
              ngModel
              required
              number
              maxlength="10"
              minlength="10"
            />
            <span class="error" *ngIf="form.submitted && phone.errors?.required"
              >Phone number is required.</span
            >
            <span
              class="error"
              *ngIf="
                form.submitted &&
                (phone.errors?.number ||
                  phone.errors?.maxlength ||
                  phone.errors?.minlength)
              "
              >Please enter a valid phone number.</span
            >
          </div>
          <div class="col-12 col-lg-6">
            <label>Email</label>
            <input
              type="text"
              class="form-control"
              name="email"
              #email="ngModel"
              ngModel
              required
              ngvemail
            />
            <span class="error" *ngIf="form.submitted && email.errors?.required"
              >Email is required.</span
            >
            <span class="error" *ngIf="form.submitted && email.errors?.email"
              >Please enter a valid email address.</span
            >
          </div>
        </div>
      </div>
      <hr />
      <div class="cc_box">
        <h3 class="innerheading2">Car Detail</h3>
        <div class="row  form-group mt-4">
          <div class="col-12 col-lg-6">
            <label>Car No.</label>
            <input
              type="text"
              class="form-control"
              name="carno"
              #carno="ngModel"
              ngModel
              required
            />
            <span class="error" *ngIf="form.submitted && carno.errors?.required"
              >Please enter the car number.</span
            >
          </div>
          <div class="col-12 col-lg-6">
            <label>Chassis No.</label>
            <input
              type="text"
              class="form-control"
              name="chesis"
              #chesis="ngModel"
              ngModel
              required
            />
            <span
              class="error"
              *ngIf="form.submitted && chesis.errors?.required"
              >Please enter the chasis number.</span
            >
          </div>
        </div>
        <div class="row form-group">
          <div class="col-12 col-lg-6">
            <label>Car Model</label>
            <input
              type="text"
              class="form-control"
              name="carmodel"
              #carmodel="ngModel"
              ngModel
              required
            />
            <span
              class="error"
              *ngIf="form.submitted && carmodel.errors?.required"
              >Please enter the car model.</span
            >
          </div>
          <div class="col-12 col-lg-6">
            <label>Kms Run</label>
            <input
              type="text"
              class="form-control"
              name="kmsrun"
              #kmsrun="ngModel"
              ngModel
              required
              number
            />
            <span
              class="error"
              *ngIf="form.submitted && kmsrun.errors?.required"
              >Please enter the total number of km run.</span
            >
            <span class="error" *ngIf="form.submitted && kmsrun.errors?.number"
              >Please enter a valid value.</span
            >
          </div>
        </div>
        <div class="row form-group">
          <div class="col-12 col-lg-6">
            <label>Insurance Policy No.</label>
            <input
              type="text"
              class="form-control"
              name="ipn"
              #ipn="ngModel"
              ngModel
              required
            />
            <span class="error" *ngIf="form.submitted && ipn.errors?.required"
              >Please enter the insurance policy number.</span
            >
          </div>
          <div class="col-12 col-lg-6">
            <label>AITP/State Permit</label>
            <input
              type="text"
              class="form-control"
              name="permit"
              #permit="ngModel"
              ngModel
              required
            />
            <span
              class="error"
              *ngIf="form.submitted && permit.errors?.required"
              >Please enter the permitted state.</span
            >
          </div>
        </div>

        <div class="row form-group">
          <div class="col-12 col-lg-6">
            <label>Insurance Policy Date</label>
            <input
              type="text"
              class="form-control"
              name="ipd"
              #ipd="ngModel"
              ngModel
              placeholder="Choose a date"
              [matDatepicker]="ipDatePicker"
              required
              (focus)="ipDatePicker.open()"
            />
            <mat-datepicker #ipDatePicker></mat-datepicker>
            <span class="error" *ngIf="form.submitted && ipd.errors?.required"
              >Please select insurance policy date.</span
            >
          </div>
          <div class="col-12 col-lg-6">
            <label>Insurance Policy Due Date</label>
            <input
              type="text"
              class="form-control"
              name="ipdd"
              ngModel
              placeholder="Choose a date"
              #ipdd="ngModel"
              [matDatepicker]="ipdDatePicker"
              required
              (focus)="ipdDatePicker.open()"
            />
            <mat-datepicker #ipdDatePicker></mat-datepicker>
            <span
              class="error"
              *ngIf="form.submitted && ipdd.errors?.required"
              >Please select insurance policy due date.</span
            >
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-lg-4">
            <label class="chckbx_custom">
              <span class="chk_txt">First Aid Kit</span>
              <input type="checkbox" name="fak" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
          </div>

          <div class="col-lg-4">
            <label class="chckbx_custom">
              <span class="chk_txt">Fire Estinguisher</span>
              <input
                type="checkbox"
                name="fire_estinguisher"
                ngModel
                value="1"
              />
              <span class="checkmark"></span>
            </label>
          </div>

          <div class="col-lg-4">
            <label class="chckbx_custom">
              <span class="chk_txt">Gps Enabled</span>
              <input type="checkbox" name="gps" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
          </div>
        </div>
      </div>
      <hr />
      <div class="cc_box">
        <h3 class="innerheading2">Tick on the Documents Enclosed</h3>
        
        <div class="row mt-4">
          <div class="col-12 col-lg-4">
            <label class="chckbx_custom">
              <span class="chk_txt">RC</span>
              <input type="checkbox" name="rc" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
            <label class="chckbx_custom">
              <span class="chk_txt">Cancelled Cheque</span>
              <input
                type="checkbox"
                name="cancelled_cheque"
                ngModel
                value="1"
              />
              <span class="checkmark"></span>
            </label>
            <label class="chckbx_custom">
              <span class="chk_txt">Address Prool (Local & Parmanent)</span>
              <input type="checkbox" name="address_proof" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
          </div>
          <div class="col-12 col-lg-4">
            <label class="chckbx_custom">
              <span class="chk_txt">Insurance</span>
              <input type="checkbox" name="insurance" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
            <label class="chckbx_custom">
              <span class="chk_txt">PAN Card</span>
              <input type="checkbox" name="pan_card" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
            <label class="chckbx_custom">
              <span class="chk_txt">ID Proof (Voter, Adhar Card, License)</span>
              <input type="checkbox" name="id_proof" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
          </div>
          <div class="col-12 col-lg-4">
            <label class="chckbx_custom">
              <span class="chk_txt">Bank Account Details</span>
              <input type="checkbox" name="bank_account" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
            <label class="chckbx_custom">
              <span class="chk_txt">Car Pollution</span>
              <input type="checkbox" name="pollution" ngModel value="1" />
              <span class="checkmark"></span>
            </label>

            <div class="p-rel">
              <button type="submit" class="btn btn-dark">Upload your documents</button>
              <input
              type="file"
              name="attachments[]"
              multiple
              ngModel
              #attachment="ngModel"
              accept="image/x-png,image/jpeg"
              (change)="handleFileChange($event)"
              class="file"
            />
            </div>  
            <span
            class="error"
            *ngIf="form.submitted && files.length == 0"
            >Please upload your documents.</span
          >
          </div>
        </div>
      </div>

      <hr />
      <div class="cc_box">
        <h3 class="innerheading2">Driver Related Detail</h3>
        <div class="row  form-group mt-4">
          <div class="col-12 col-lg-6">
            <label>Driver Name</label>
            <input
              type="text"
              class="form-control"
              name="driver_name"
              #dname="ngModel"
              ngModel
              required
            />
            <span class="error" *ngIf="form.submitted && dname.errors?.required"
              >Driver Name is required.</span
            >
          </div>
          <div class="col-12 col-lg-6">
            <label>Father Name</label>
            <input
              type="text"
              class="form-control"
              name="father_name"
              #fatherName="ngModel"
              ngModel
              required
            />
            <span
              class="error"
              *ngIf="form.submitted && fatherName.errors?.required"
              >Father Name is required.</span
            >
          </div>
        </div>
        <div class="row mt-4">
          <div class="col-12 col-lg-4">
            <label class="chckbx_custom">
              <span class="chk_txt">Address proof (Local & Permanent)</span>
              <input type="checkbox" name="driver_address_proof" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
            <label class="chckbx_custom">
              <span class="chk_txt">Voter Id</span>
              <input type="checkbox" name="driver_voter_id" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
            <label class="chckbx_custom">
              <span class="chk_txt">Aadhar Card</span>
              <input type="checkbox" name="driver_aadhar_card" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
          </div>
          <div class="col-12 col-lg-4">
            <label class="chckbx_custom">
              <span class="chk_txt">Bank Account</span>
              <input type="checkbox" name="driver_bank_account" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
            <label class="chckbx_custom">
              <span class="chk_txt">PAN Card</span>
              <input type="checkbox" name="driver_pan_card" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
            <label class="chckbx_custom">
              <span class="chk_txt">Valid Commercial License</span>
              <input type="checkbox" name="driver_license" ngModel value="1" />
              <span class="checkmark"></span>
            </label>
          </div>

          <div class="col-12 col-lg-4">
            <label class="chckbx_custom">
              <span class="chk_txt">Medical Certificate</span>
              <input type="checkbox" name="driver_medical_cetification" ngModel value="1" />
              <span class="checkmark"></span>
            </label>

            <label class="chckbx_custom">
              <span class="chk_txt">Other</span>
              <input type="checkbox" name="other" ngModel value="1" />
              <span class="checkmark"></span>
            </label>

            <div class="p-rel">
              <button class="btn btn-dark">Upload your documents</button>
              <input
              type="file"
              name="driver_docs[]"
              multiple
              ngModel
              accept="image/x-png,image/jpeg"
              (change)="handleFileChange($event,'dd')"
              class="file"
            />
            </div>
            <span
            class="error"
            *ngIf="form.submitted && driverDocs.length == 0"
            >Please upload your documents.</span
          >
          </div>
        </div>

      <input type="hidden" name="submitted" ngModel value="1" />
      <div class="row text-center mt-5">
        <button [disabled]="submitting" class="btn-dark btn m-auto dark_ovr">
          {{ submitting ? "Please Wait . . ." : "Submit" }}
        </button>
      </div>
      <div *ngIf="enrolled" class="mt-2 alert alert-success text-center">
        Enrollment Successfull
      </div>
      </div>
    </form>
  </div>
</section>
